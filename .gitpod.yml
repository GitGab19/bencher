# https://www.gitpod.io/docs/references/gitpod-yml

# .vscode/extension.json
vscode:
  extensions:
    [
      "vscodevim.vim",
      "eamodio.gitlens",
      "rust-lang.rust-analyzer",
      "serayuzgur.crates",
      "wcrichton.flowistry",
      "tamasfe.even-better-toml",
      "yzhang.markdown-all-in-one",
      "unifiedjs.vscode-mdx",
      "redhat.vscode-yaml",
      "esbenp.prettier-vscode",
      "Syler.sass-indented",
      "osohq.oso",
      "TabNine.tabnine-vscode",
      "streetsidesoftware.code-spell-checker",
      "shardulm94.trailing-spaces",
      "mtxr.sqltools",
      "mtxr.sqltools-driver-sqlite",
      "ms-azuretools.vscode-docker",
    ]

# Commands to start on workspace startup
tasks:
  - name: General Setup
    command: ./scripts/setup.sh
  - name: API Setup
    before: cd services/api && cargo test --no-run
    command: cargo run
  - name: UI Setup
    before: cd services/ui && npm install --include=dev
    command: npm x vite

# Ports to expose on workspace startup
ports:
  - name: Bencher API
    port: 61016
    onOpen: ignore
  - name: Bencher UI
    port: 3000
    onOpen: ignore
  - name: Vite HMR
    port: 3001
    onOpen: ignore
